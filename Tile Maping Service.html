<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Tile Maping Service</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
          integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
          crossorigin=""/>
    <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
            integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
            crossorigin=""></script>
</head>
<body>
<div id="map" style="height: 100vh"></div>
</body>

<script>
    const apiKey = "--apikey--";
    const zoom = 9;

    const map = new L.Map('map', {
        crs: L.CRS.EPSG3857
    }).setView([58.371475, 26.717015], zoom);

    L.TileLayer.MyCustomLayer = L.TileLayer.extend({
        getTileUrl: function (coords) {
            const z = Math.abs((9 - coords.z) * 2);
            if (coords.z < 9) {
                coords.x = Math.floor(coords.x + 280 /z);
                coords.y = Math.floor(coords.y - 350 /z);
            } else if (coords.z > 9) {
                coords.x = coords.x + 280 * z;
                coords.y = coords.y - 350 * z;
            } else {
                coords.x = coords.x + 280;
                coords.y = coords.y - 350;
            }
            return L.TileLayer.prototype.getTileUrl.call(this, coords);
        }
    });

    L.tileLayer.myCustomLayer = function (templateUrl, options) {
        return new L.TileLayer.MyCustomLayer(templateUrl, options);
    };

    L.tileLayer.myCustomLayer('https://gdh-api.reach-u.com/tms/GDHdefault/GLOBAL_WEBMERCATOR/{z}/{x}/{y}.png?&apikey=' + apiKey, {
        maxZoom: 11,
        minZoom: 7,
        continuousWorld: true,
        tms: true,
    }).addTo(map);



    //Previous code
    // const tileX = 579;
    // const tileY = 709;
    // const url = "https://gdh-api.reach-u.com/tms/GDHdefault/GLOBAL_WEBMERCATOR/" + zoom + "/" + tileX + "/" + tileY + ".png?&apikey=" + apiKey;
    // const map = L.map('map', {
    //     crs: L.CRS.EPSG3857
    //
    // }).setView(coordinates, zoom);
    //
    // L.tileLayer(url, {
    //     tms: true,
    //     layers: 'GDHdefault',
    //     format: 'image/png',
    //     version: "1.3.0"
    // }).addTo(map);
    //

</script>

</html>
